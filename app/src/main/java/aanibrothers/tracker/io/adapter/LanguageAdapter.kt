package aanibrothers.tracker.io.adapterimport aanibrothers.tracker.io.databinding.*import aanibrothers.tracker.io.extension.*import android.content.*import android.view.*import androidx.recyclerview.widget.*import coder.apps.space.library.extension.LanguageInfoimport coder.apps.space.library.extension.languagesimport coder.apps.space.library.helper.*class LanguageAdapter(val context: Context, private val listener: ((String) -> Unit)?) : RecyclerView.Adapter<LanguageAdapter.DataViewHolder>() {    private var oldSelectedPosition: Int = -1    private var selectedPosition: Int = 0    private var languages = mutableListOf<LanguageInfo>()    private var selected = "en"    init {        selected = context.currentLanguage.toString()        languages = languages()    }    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): DataViewHolder {        return DataViewHolder(LayoutRowItemLanguageBinding.inflate(LayoutInflater.from(parent.context), parent, false))    }    override fun onBindViewHolder(holder: DataViewHolder, position: Int) {        holder.binding.apply {            val language = languages.get(position)            textLanguage.text = language.languageName            textLanguage.isSelected = true            imageView.setImageResource(language.icon)            textLanguage.isSelected = true            if (selected == language.languageCode) {                selectedPosition = position                cardItem.isSelected = true            } else {                cardItem.isSelected = false            }            root.setOnClickListener {                oldSelectedPosition = selectedPosition                selectedPosition = position                selected = language.languageCode                listener?.invoke(selected)                notifyItemChanged(oldSelectedPosition)                notifyItemChanged(selectedPosition)            }        }    }    override fun getItemCount(): Int {        return languages.size    }    class DataViewHolder(val binding: LayoutRowItemLanguageBinding) : RecyclerView.ViewHolder(binding.root)}